# 管理员账户设置指南

## 如何创建管理员账户

管理员账户需要通过以下步骤设置：

### 步骤 1: 注册管理员账号

1. 访问网站首页
2. 点击"登录/注册"按钮
3. 选择"注册"标签
4. 输入以下信息：
   - 邮箱: `2749046219@qq.com` (或您指定的邮箱)
   - 密码: `6308001Zha`
   - 姓名: `系统管理员` (可选)
5. 点击"注册"完成注册

### 步骤 2: 在数据库中设置管理员权限

注册完成后，需要在 Supabase 数据库中将该用户设置为管理员：

#### 方法 A: 使用 Supabase Dashboard

1. 登录 [Supabase Dashboard](https://app.supabase.com)
2. 选择您的项目
3. 点击左侧菜单的 "Table Editor"
4. 选择 `profiles` 表
5. 找到刚注册的用户（通过邮箱查找）
6. 编辑该用户记录，设置：
   - `is_admin` = `true`
   - `is_approved` = `true`
   - `approval_status` = `'approved'`
7. 保存更改

#### 方法 B: 使用 SQL 命令

1. 登录 [Supabase Dashboard](https://app.supabase.com)
2. 点击左侧菜单的 "SQL Editor"
3. 执行以下 SQL 命令（替换邮箱为您的管理员邮箱）：

```sql
UPDATE profiles
SET
  is_admin = true,
  is_approved = true,
  approval_status = 'approved'
WHERE email = '2749046219@qq.com';
```

4. 点击 "Run" 执行命令

### 步骤 3: 登录管理员账户

1. 刷新网页或重新登录
2. 使用管理员账号登录：
   - 邮箱: `2749046219@qq.com`
   - 密码: `6308001Zha`
3. 登录后将自动进入管理员控制台

## 管理员功能

管理员登录后可以：

### 1. 查看用户列表
- 待审批用户
- 已批准用户
- 所有用户

### 2. 用户审批
- **批准用户**: 用户获得使用权限和20次免费额度
- **拒绝用户**: 用户无法使用系统

### 3. 管理用户额度
- 查看用户剩余额度
- 设置/调整用户额度
- 查看用户使用历史

### 4. 注销用户
- 清空用户所有额度
- 将用户状态改为已拒绝

## 安全建议

1. **修改默认密码**
   - 首次登录后立即修改密码
   - 使用强密码（包含大小写字母、数字、特殊字符）

2. **保护管理员账号**
   - 不要与他人分享管理员账号
   - 定期更换密码
   - 避免在公共场所登录

3. **谨慎操作**
   - 审批用户前确认用户身份
   - 注销用户前务必确认
   - 定期检查用户使用情况

## 常见问题

### Q: 如何创建多个管理员？
A: 重复上述步骤，为其他账号设置 `is_admin = true`

### Q: 管理员可以使用绘图功能吗？
A: 可以，但管理员登录后默认显示管理后台。如果需要使用绘图功能，可以创建一个普通用户账号。

### Q: 如何取消管理员权限？
A: 在 `profiles` 表中将对应用户的 `is_admin` 设置为 `false`

### Q: 忘记管理员密码怎么办？
A: 可以通过 Supabase 的用户管理功能重置密码，或创建新的管理员账号。

## 用户审批流程

1. 新用户注册后，状态为 "待审批" (`approval_status = 'pending'`)
2. 管理员在控制台查看待审批用户列表
3. 管理员点击"批准"或"拒绝"
4. 批准后：
   - 用户可以登录使用系统
   - 自动获得 20 次免费绘图额度
5. 拒绝后：
   - 用户无法使用系统功能
   - 登录后看到拒绝提示

## 支付管理

当前系统使用微信支付二维码：
- 39元套餐：100张图片
- 79元套餐：250张图片
- 99元套餐：350张图片

用户扫码支付后，需要：
1. 用户点击"我已完成支付"
2. 手动在管理后台确认支付（临时方案）
3. 或使用测试面板模拟支付成功（开发环境）

**重要提示**: 正式上线前请集成真实的支付回调系统，参考 `PAYMENT_GUIDE.md`。
