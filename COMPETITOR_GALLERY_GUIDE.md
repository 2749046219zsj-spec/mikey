# 竞品图库使用指南

## 功能概述

竞品图库是一个专门用于查看和管理从浏览器扩展上传的竞品参考图片的功能模块。

## 如何访问

### 方式1：从画廊页面进入

1. 打开应用主页（画廊视图）
2. 点击右上角的"竞品图库"按钮
3. 进入竞品图库界面

### 方式2：直接访问

竞品图库已集成到主应用，无需单独部署。

## 主要功能

### 1. 图片浏览

- **网格视图**：以卡片形式展示所有竞品图片
- **图片预览**：点击任意图片卡片查看详情
- **自动加载**：图片按上传时间倒序排列

### 2. 搜索和筛选

#### 搜索功能
- 在搜索框输入关键词
- 支持搜索图片名称和文件名
- 实时搜索结果

#### 筛选功能
点击"筛选"按钮展开筛选面板：

- **按分类筛选**：选择特定分类（如"competitor"）
- **按标签筛选**：选择一个或多个标签
- **清除筛选**：一键清除所有筛选条件

### 3. 图片详情

点击图片卡片后，打开详情模态框：

#### 查看信息
- **完整图片预览**：高清大图展示
- **基本信息**：
  - 图片名称
  - 分类标签
  - 标签列表
  - 文件名
  - 创建时间

- **来源信息**（如果有）：
  - 商品名称
  - 价格信息
  - 来源页面链接

- **元数据**：完整的JSON格式元数据

#### 操作功能
- **下载图片**：点击下载图标保存图片
- **编辑信息**：点击编辑图标修改名称、分类和标签
- **删除图片**：点击删除图标移除图片（需确认）

### 4. 图片卡片信息

每个图片卡片显示：
- 图片预览（正方形缩略图）
- 图片名称（如果没有则显示商品名称）
- 前2个标签（如果有更多显示"+N"）
- 来源页面链接（如果有）
- 创建日期

## 数据来源

竞品图库中的图片来自：

1. **浏览器扩展上传**
   - 使用"竞品图库上传助手"浏览器扩展
   - 在网页上右键点击图片上传
   - 自动提取商品信息和页面来源

2. **自动元数据**
   扩展会自动记录：
   - 图片尺寸
   - 来源页面URL
   - 页面标题
   - 商品名称（如果可识别）
   - 价格信息（如果可识别）
   - 上传时间

## 技术实现

### 数据库表

图片存储在 `public_reference_images` 表中：

```sql
-- 关键字段
product_id: null (独立图片，不关联产品)
name: 图片名称
category: 分类（默认为"competitor"）
tags: 标签数组
metadata: JSON格式的完整元数据
image_url: 图片URL
is_active: 是否启用
```

### 权限控制

- **所有用户**：可以查看启用的竞品图片
- **管理员**：可以编辑和删除图片

### 服务层

文件位置：`src/services/competitorGalleryService.ts`

主要方法：
- `getCompetitorImages()` - 获取图片列表
- `getCompetitorImageById()` - 获取单张图片详情
- `updateCompetitorImage()` - 更新图片信息
- `deleteCompetitorImage()` - 删除图片
- `getCategories()` - 获取所有分类
- `getAllTags()` - 获取所有标签

## 使用场景

### 场景1：收集竞品设计参考

1. 浏览竞品网站（如SHEIN、淘宝）
2. 使用浏览器扩展快速保存图片
3. 在竞品图库中查看和整理
4. 筛选特定类型的设计
5. 导出用于设计参考

### 场景2：团队协作收集

1. 团队成员各自使用扩展收集
2. 所有图片自动汇总到竞品图库
3. 使用标签分类整理
4. 在详情页查看来源和背景
5. 讨论和筛选有价值的设计

### 场景3：设计趋势研究

1. 长期收集同类产品图片
2. 按分类和标签组织
3. 分析设计趋势和元素
4. 查看元数据了解价格区间
5. 追溯来源获取更多信息

## 操作技巧

### 快速筛选

1. 使用搜索框快速定位
2. 组合使用分类和标签筛选
3. 清除筛选查看全部

### 批量管理

1. 统一命名规范
2. 使用标签分类
3. 定期清理无用图片

### 追溯来源

1. 点击图片查看详情
2. 查看"来源信息"部分
3. 点击来源链接访问原页面

## 注意事项

### 存储空间

- 图片存储在Supabase Storage中
- 注意Supabase存储配额限制
- 定期清理不需要的图片

### 版权合规

- 仅用于内部参考研究
- 不得用于商业侵权
- 尊重原作者版权

### 数据安全

- 定期备份重要图片
- 不要上传敏感信息
- 管理员谨慎使用删除功能

## 常见问题

### Q: 为什么某些图片没有商品信息？

A: 浏览器扩展只能识别特定网站的结构。对于未支持的网站，只会保存图片本身和基本信息。

### Q: 如何批量上传图片？

A: 使用浏览器扩展在网页上连续右键上传多张图片。

### Q: 可以编辑图片本身吗？

A: 不可以。只能编辑图片的名称、分类和标签等元信息。

### Q: 删除的图片可以恢复吗？

A: 不可以。删除操作是永久性的，请谨慎操作。

### Q: 如何导出图片？

A: 在详情页点击下载图标可以单独下载图片。暂不支持批量导出。

## 未来功能规划

- [ ] 批量导出功能
- [ ] 图片对比功能
- [ ] 相似图片检测
- [ ] AI智能标签
- [ ] 设计元素提取
- [ ] 颜色分析

## 技术支持

如有问题，请检查：
1. 浏览器扩展是否正确配置
2. Supabase数据库连接是否正常
3. 用户权限是否正确设置

---

**提示**：竞品图库与浏览器扩展配合使用效果最佳。先配置好浏览器扩展，然后在主应用中查看管理上传的图片。
